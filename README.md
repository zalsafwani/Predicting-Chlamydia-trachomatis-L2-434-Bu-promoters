# Predicting promoters for Chlamydia trachomatis strain L2/434/Bu

Final project for my BIOI 4870 (Database Search & Pattern Discovery) class.

The project goals:
  1. Find the promoters for Chlamydia trachomatis L2/434/Bu.
  2. Find the aliases for the genes in Chlamydia trachomatis L2/434/Bu.
  
 Data for the database, within Github size constraints, have been added in the /data directory. The only missing files required for this database are:

* go.tab - can be generated by using format_gene_ontology.py on the [Gene Ontology in OBO format](http://current.geneontology.org/ontology/go.obo)
* protein_interaction_data.tsv - can be generated by downloading [BioGRID](https://downloads.thebiogrid.org/BioGRID/Release-Archive/BIOGRID-3.5.172/) and removing extraneous columns as shown in prep_data.sh

Want to replicate this database? Install and configure PostgreSQL, generate go.tab and protein_interaction_data.tsv as describe above, or make it easy on yourself and run Postgre in Docker:

## Database Setup
Install [Docker](https://www.docker.com/), then pull an image for Postgres
```bash
$ docker pull postgres
```
Create a directory for the data created by the Postgres instance
```bash
$ mkdir -p $HOME/docker/volumes/postgres
```
Start the container
```bash
$ docker run --rm   --name pg-docker -e POSTGRES_PASSWORD=docker -d -p 5432:5432 -v $HOME/docker/volumes/postgres:/var/lib/postgresql/data  postgres
```
cd into your preferred directory, clone this repository, then cd into the repository
```bash
$ git clone https://github.com/wigasper/viral-mirna-database
$ cd ./viral-mirna-database
```
Download the Gene Ontology and parse
```bash
$ curl -o ./data/go.obo http://current.geneontology.org/ontology/go.obo
$ python3 format_gene_ontology.py -i ./data/go.obo
```
Download BioGRID and remove unnecessary data
```bash
$ curl -o ./data/biogrid_raw.tsv.zip https://downloads.thebiogrid.org/Download/BioGRID/Release-Archive/BIOGRID-3.5.172/BIOGRID-ALL-3.5.172.tab2.zip
$ unzip ./data/biogrid_raw.tsv.zip -d ./data
$ cut -f 2,3,8,9 ./data/BIOGRID-ALL-3.5.172.tab2.txt | tail -n +2 > ./data/protein_interaction_data.tsv
```
Connect to psql, using the password specified above ("docker") when prompted
```bash
$ psql -h localhost -U postgres -d postgres
```
Create the database and import data
```sql
CREATE DATABASE vir_mirna;
\i initialize_db.sql
```
Done! You now have a fully functional viral miRNA database. 
Want to shut it down?
```bash
$ docker stop pg-docker
```

## File Descriptions
### Data Aggregation/Preprocessing
* **format_gene_ontology.py** - Converts the gene ontology in OBO format into a tab delimited format  
* **get_uniprot_xmls.py** - Uses the UniProt API to retrieve and store XML files for a list of needed UniProt IDs specified by [Qureshi et al.'s viral miRNA target data](http://crdd.osdd.net/servers/virmirna/)   
* **prep_data.sh** - Shell script to remove unneeded columns and headers from raw data  
* **uniprot_data_extraction.py** - Extracts required data for the database from UniProt XMLs  

### Database Setup
* **initialize_db.sql** - PostgreSQL code to set up the database 

### Analysis
* **exploratory_network_analysis.md** - A simple exploratory analysis of the EBV target gene interaction network
* **community_enrichment_analysis.ipynb** - GO enrichment analysis of the communities detected with the infomap community detection algorithm

### User Interface
* **index.php** - A simple web interface for the database

## E.R. Diagram
